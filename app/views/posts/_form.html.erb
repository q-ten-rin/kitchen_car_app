<p class="text-muted small mb-3">
  <span class="text-danger">*</span> は必須項目です
</p>
<%= form_with model: @post, local: true, multipart: true do |f| %>
    <div class="mb-3">
      <%= f.label :title do %>
        タイトル <span class="text-danger">*</span>
      <% end %>
      <%= f.text_field :title, class: "form-control" %>
    </div>

    <div class="row">
      <div class="col-md-3">
        <%= f.label :category do %>
          カテゴリー <span class="text-danger">*</span>
        <% end %>
        <%= f.collection_select :category_id, Category.all, :id, :name, include_blank: "選択してください" %>
      </div>

      <div class="col-md-6">
        <%= f.label :place, "場所" %>
        <%= f.text_field :place, class: "form-control" %>
      </div>

      <div class="col-md-3">
        <%= f.label :visited_at, "訪れた日時" %>
        <%= f.datetime_local_field :visited_at, class: "form-control" %>
      </div>
    </div>

    <div class="mb-3">
      <%= f.label :title do %>
        キッチンカーの名前 <span class="text-danger">*</span>
      <% end %>
      <%= f.text_field :kitchen_car_name, class: "form-control" %>
    </div>

    <div class="mb-3">
      <%= f.label :body, "本文" %>
      <%= f.text_area :body, class: "form-control", rows: "10" %>
    </div>

    <div class="form-group">
      <%= f.label :star, "評価" %>

      <!-- hidden field（選んだ星が入る）-->
      <%= f.hidden_field :star, id: "post_star" %>

      <!-- ここに星が表示される -->
      <div id="post_raty"></div>
    </div>

    <div class="mb-3">
      <%= f.label :images, "画像" %>
      <%= f.file_field :images, multiple: true, class: "form-control" %>
    </div>

    <div class="mb-3">
      <%= f.label :tags, "タグ" %>
      <%= f.text_field :tag_names, placeholder: "例）クレープ, 東京, スイーツ", class: "form-control", value: post.tags.map(&:name).join(",") %>
    </div>

    <%= f.hidden_field :latitude, id: "post_latitude" %>
    <%= f.hidden_field :longitude, id: "post_longitude" %>

    <p>マップ</p>
    <div id='map' class="form-map"></div>

    <div class="d-flex justify-content-end">
      <%= f.submit nil, class: "btn btn-primary mt-5" %>
    </div>
  <% end %>

  <script
  src="https://maps.googleapis.com/maps/api/js?key=<%= ENV['GOOGLE_MAPS_API_KEY'] %>&callback=initMap"
  async
  defer>
</script>