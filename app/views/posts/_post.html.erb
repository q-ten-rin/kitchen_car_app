<div class="card h-100 w-100 m-3">
  <div class="card-body d-flex flex-column">

    <%# ---------- 画像 ---------- %>
    <div class="image-wrapper position-relative mb-3">
      <% if post.images.attached? %>
        <%= image_tag post.images.first, class: "post-card-image mb-3" %>
      <% else %>
        <%= image_tag "default.png", class: "post-card-image mb-3" %>
      <% end %>

      <div class="position-absolute top-0 end-0 mt-1 me-3">
        <%= render "posts/favorite_buttons", post: post %>
      </div>
    </div>

    <%# ---------- タイトル・本文 ---------- %>
    <div class="flex-grow-1">
      <h3><%= post.title %></h3>
      <div class="post-show-star" data-score="<%= post.star %>"></div>
      <p>キッチンカーの名前：<%= post.kitchen_car_name %></p>
      <p>投稿日：<%= l(post.created_at, format: :short) %></p>

      <% if post.tags.present? %>
        <div class="mb-3">
          <%= render "posts/tags", post: post %>
        </div>
      <% end %>
    </div>

    <%# ---------- 下部ボタン ---------- %>
    <div class="mt-auto">
      <div class="d-flex justify-content-between">
        <%= link_to "詳細を見る", post_path(post), class: "btn btn-primary" %>

        <% if current_user == post.user %>
          <div>
            <%= link_to "編集", edit_post_path(post), class: "btn btn-primary me-2" %>
            <%= link_to "削除", post_path(post), data: { turbo_method: :delete, turbo_confirm: "本当に削除しますか？" }, class: "btn btn-danger" %>
          </div>
        <% end %>
      </div>
    </div>
  </div>
</div>
