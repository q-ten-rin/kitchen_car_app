<div class="card h-100 mb-3">
  <div class="card-body d-flex flex-column">
    <div class="row justify-content-evenly">
      <div class="col-4 position-relative">
        <% if post.images.attached? %>
          <%= image_tag post.images.first, class: "img-fluid mb-3" %>
        <% else %>
          <%= image_tag "default.png", class: "img-fluid" %>
        <% end %>

        <div class="position-absolute top-0 end-0 m-3">
          <%= render "posts/favorite_buttons", post: post %>
        </div>
      </div>
      <div class="col-4">
        <div class="flex-grow-1">
          <h3><%= post.title %></h3>
          <p>出店場所：<%= post.place %></p>
          <p>投稿日：<%= l(post.created_at, format: :short) %></p>
          <% if post.tags.present? %>
            <div class="mb-3">
              <%= render 'posts/tags', post: post %>
            </div>
          <% end %>
        </div>
      </div>
    </div>

    <div class="mt-auto">
      <div class="row justify-content-between">
        <div class="col-4">
          <%= link_to "詳細を見る", post_path(post), class: "btn btn-primary" %>
        </div>
        <div class="col-auto">
          <% if current_user == post.user %>
            <%= link_to "編集", edit_post_path(post), class: "btn btn-primary me-2" %>
            <%= link_to "削除", post_path(post), data: { turbo_method: :delete, turbo_confirm: "本当に削除しますか？" }, class: "btn btn-danger" %>
          <% end %>
        </div>
      </div>
    </div>
  </div>
</div>